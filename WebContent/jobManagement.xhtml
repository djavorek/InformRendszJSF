<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
	
<h:body>
	<ui:composition template="templates/template.xhtml">
		<ui:define name="content">
			<h:form id="jobTreeForm">
				<p:tree id="jobTaskTree" value="#{jobManagementController.jobTreeRoot}" 
					var="node" 
					animate="true"
					dynamic="true">
			        <p:treeNode>
			            <h:outputText value="#{node.name}" />
			        </p:treeNode>
			    </p:tree>
			</h:form>
			
			<h:form id="addTaskForm">
				<p:messages autoUpdate="true" showDetails="true" />
				<p:inputText id="Name"
					binding="#{taskName}"
					placeholder="Task name" 
					required="true"	requiredMessage="You must provide a name!">
				</p:inputText>
				<br/>
				<p:selectOneMenu id="Job" 
					binding="#{jobName}" 
					required="true"
					requiredMessage="You must provide a type!"
					dynamic="true">
		            <f:selectItem itemLabel="Select One" itemValue="" />
		            <f:selectItems value="#{jobManagementController.availableJobs}" var="job" itemLabel="#{job.name}" itemValue="#{job.name}" />
		        </p:selectOneMenu>
		        <br/>
				<p:commandButton title="Add"
					process="@form"
					update="@form, :jobTreeForm:jobTaskTree"
					action="#{jobManagementController.addTaskUnderJob(taskName,jobName)}"/>
			</h:form>
		</ui:define>
	</ui:composition>
</h:body>
</html>
